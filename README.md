# מערכת ניהול ועדות - איזון עומסים

מערכת ווב מתקדמת לניהול ועדות ארגוניות, תזמון ישיבות אוטומטי ויצירת אירועים עם אילוצי זמן מתקדמים.

## תכונות המערכת

### 🏢 ניהול ארגוני מתקדם
- **ניהול חטיבות** עם צבעים מותאמים אישית לזיהוי ויזואלי
- **ניהול מסלולים** הקשורים לחטיבות עם היררכיה ברורה
- **מערכת הרשאות** מבוססת תפקידים (Admin, Manager, User)
- **הרשאות מבוססות חטיבה** - משתמשים יכולים לגשת רק לחטיבה שלהם

### 📅 ניהול סוגי ועדות גמיש
- **יצירה דינמית** של סוגי ועדות לכל חטיבה
- **תזמון גמיש**: ועדות שבועיות או חודשיות
- **ועדות חודשיות**: אפשרות לקבוע שבוע מסוים בחודש (ראשון, שני, שלישי, רביעי)
- **ימי עסקים**: ראשון עד חמישי (לוח עבודה ישראלי)
- **ממשק ניהול מודרני** עם חיפוש וסינון

### 🤖 תזמון אוטומטי חכם
- **תזמון אוטומטי** לחודשים מרובים בבת אחת
- **אילוצים עסקיים מתקדמים**:
  - ועדה אחת בלבד ביום בכל המערכת
  - כיבוד ימי עסקים (ראשון-חמישי)
  - התחשבות בחגים ותאריכי חריגים
  - מגבלות שבועיות על מספר ישיבות
- **ממשק ביקורת ואישור** לפני יצירת ישיבות
- **בחירה חכמה** של ישיבות לאישור

### 📋 ניהול אירועים מתקדם
- **יצירת אירועים** הקשורים לישיבות ועדה ספציפיות
- **אימות חטיבות**: אירועים יכולים להיות קשורים רק למסלולים מאותה חטיבה
- **סוגי אירועים**: קו"ק או שוטף
- **מעקב אחר בקשות צפויות**
- **יצירה מהירה** ישירות מהיומן

### 📊 ממשק משתמש מתקדם
- **עיצוב רספונסיבי** עם Bootstrap 5
- **יומן אינטראקטיבי** עם צבעי חטיבות
- **תפריטי הקשר חכמים** בלחיצה על תאריכים
- **דשבורד מידע** עם סטטיסטיקות
- **ממשק בעברית** עם תמיכה RTL מלאה

## התקנה והפעלה

### דרישות מערכת
- Python 3.8 ומעלה
- Flask ותלויות נוספות (ראה requirements.txt)

### התקנה מהירה
```bash
# שכפול הפרויקט
git clone <repository-url>
cd izun

# יצירת סביבה וירטואלית
python -m venv .venv
source .venv/bin/activate  # Linux/Mac
# או
.venv\Scripts\activate  # Windows

# התקנת תלויות
pip install -r requirements.txt

# הפעלת המערכת
python app.py
```

### הפעלה עם Docker (אופציונלי)
```bash
# בניית התמונה
docker build -t committee-system .

# הפעלה
docker run -p 5001:5001 committee-system
```

## מבנה הפרויקט

```
izun/
├── app.py                    # אפליקציית Flask ראשית
├── database.py               # ניהול מסד נתונים SQLite
├── auto_scheduler.py         # מנוע תזמון אוטומטי
├── auth.py                   # מערכת אימות והרשאות
├── wsgi.py                   # נקודת כניסה לשרתי WSGI
├── services/                 # שכבת שירותים
│   ├── auto_schedule_service.py
│   └── committee_types_service.py
├── templates/                # תבניות HTML
│   ├── base.html
│   ├── index.html
│   ├── auto_schedule.html
│   ├── committee_types.html
│   └── [...]
├── static/                   # קבצים סטטיים
│   ├── css/style.css
│   └── js/main.js
├── requirements.txt          # תלויות Python
├── netlify.toml             # הגדרות Netlify
├── render.yaml              # הגדרות Render
└── README.md                # תיעוד זה
```

## מסד הנתונים

המערכת משתמשת ב-SQLite עם ארכיטקטורה מתקדמת. לפרטים מלאים ראה [ERD.md](ERD.md).

### טבלאות עיקריות:
- **hativot** - חטיבות ארגוניות עם צבעים מותאמים
- **committee_types** - הגדרות סוגי ועדות לכל חטיבה
- **vaadot** - מופעי ישיבות ועדה ספציפיים
- **maslulim** - מסלולים הקשורים לחטיבות
- **events** - אירועים בישיבות ועדה
- **exception_dates** - חגים ותאריכי חריגים
- **users** - משתמשים עם הרשאות
- **system_settings** - הגדרות מערכת גלובליות

## שימוש במערכת

### 🏠 דף הבית
- **דשבורד מידע** עם סטטיסטיקות כלליות
- **יומן אינטראקטיבי** עם צבעי חטיבות
- **תפריטי הקשר** לפעולות מהירות
- **פעולות מהירות** ליצירת ועדות ואירועים

### 📅 ניהול סוגי ועדות
1. גש ל**"הגדרות" → "ניהול סוגי ועדות"**
2. **הוסף סוג ועדה חדש**: בחר חטיבה, יום בשבוע, תדירות
3. **ערוך סוגי ועדות קיימים** עם ממשק מודרני
4. **חפש וסנן** לפי תדירות או חטיבה

### 🤖 תזמון אוטומטי
1. גש ל**"תזמון אוטומטי"**
2. **בחר שנה וחודשים** (אפשרות לבחור מספר חודשים)
3. **בחר חטיבות** לתזמון
4. **צפה בהצעות** בממשק הביקורת
5. **אשר ישיבות נבחרות** ליצירה אוטומטית

### 📋 ניהול אירועים
1. **מהיומן**: לחץ על תאריך עם ועדה קיימת
2. **מדף האירועים**: צור אירוע חדש
3. **בחר ישיבת ועדה** ומסלול מאותה חטיבה
4. **הגדר פרטי אירוע**: שם, סוג (קו"ק/שוטף), בקשות צפויות

### ⚙️ ניהול מערכת (מנהלים)
- **ניהול חטיבות**: הוספה, עריכה, צבעים מותאמים
- **ניהול מסלולים**: קישור לחטיבות
- **ניהול משתמשים**: הרשאות והקצאת חטיבות
- **תאריכי חריגים**: חגים וימי שבתון

## אילוצי תזמון מתקדמים

המערכת מבצעת אימות מקיף:

- ✅ **ימי עסקים**: ראשון עד חמישי בלבד
- ✅ **יום נכון לועדה**: כל סוג ועדה ביום קבוע
- ✅ **ועדה אחת ביום**: בכל המערכת
- ✅ **מגבלות שבועיות**: מקסימום ישיבות בשבוע
- ✅ **ועדות חודשיות**: שבוע מסוים בחודש
- ✅ **חגים וחריגים**: התחשבות אוטומטית
- ✅ **אימות חטיבות**: אירועים ומסלולים מאותה חטיבה

## פיתוח והרחבה

### ארכיטקטורה מודולרית
- **Flask App** - שרת ווב עם routing
- **DatabaseManager** - ניהול מסד נתונים מתקדם
- **AutoMeetingScheduler** - מנוע תזמון חכם
- **Service Layer** - לוגיקה עסקית מופרדת
- **AuthManager** - מערכת הרשאות מתקדמת

### הרחבות אפשריות
- **API REST** למערכות חיצוניות
- **דוחות מתקדמים** ו-analytics
- **התראות ואימיילים** אוטומטיים
- **אינטגרציה עם לוח שנה חיצוני**
- **ממשק נייד** responsive

## פריסה (Deployment)

### Netlify (מומלץ לפיתוח)
```bash
# קישור לחשבון Netlify
netlify login
netlify deploy --prod
```

### Render (מומלץ לייצור)
```bash
# העלאה ל-Render עם render.yaml
git push origin main
```

### שרת מקומי
```bash
# פיתוח
python app.py

# ייצור עם Gunicorn
gunicorn -w 4 -b 0.0.0.0:5001 wsgi:app
```

## תמיכה ופתרון בעיות

### לוגים ודיבוג
- **לוגי Flask**: מוצגים בקונסול
- **לוגי שירותים**: ברמת INFO ומעלה
- **שגיאות מסד נתונים**: עם הודעות בעברית

### בעיות נפוצות
1. **שגיאת מסד נתונים**: הרץ מיגרציה אוטומטית
2. **בעיות הרשאות**: בדוק הגדרות משתמש
3. **תזמון לא עובד**: וודא שיש סוגי ועדות מוגדרים

### קבלת עזרה
- בדוק את [ERD.md](ERD.md) למבנה מסד הנתונים
- בדוק את [USER_GUIDE.md](USER_GUIDE.md) למדריך מפורט
- הרץ בדיקות מערכת עם `python -m pytest` (אם מותקן)
