<!-- Week View Template -->
<div class="week-view">
    <div class="week-calendar">
        <!-- Time column header -->
        <div class="time-column-header"></div>
        
        <!-- Day headers -->
        {% for day in week_data.days %}
        <div class="day-column-header {% if day.is_today %}today-header{% endif %}">
            <div class="day-name">{{ day.day_name }}</div>
            <div class="day-date">{{ day.date.strftime('%d/%m') }}</div>
        </div>
        {% endfor %}
        
        <!-- Time slots -->
        {% for hour in range(8, 18) %}
        <div class="time-slot">{{ '%02d:00'|format(hour) }}</div>
        
        {% for day in week_data.days %}
        <div class="day-slot {% if day.is_today %}today-slot{% endif %}" 
             data-date="{{ day.date }}" 
             data-hour="{{ hour }}">
            
            {% set hour_events = day.events_by_hour.get(hour, []) %}
            {% for event in hour_events %}
            <div class="week-event" 
                 data-event-id="{{ event.event_id }}"
                 title="{{ event.name }} - {{ event.committee_name }}">
                <div class="event-time">{{ event.time or ('%02d:00'|format(hour)) }}</div>
                <div class="event-title">{{ event.name }}</div>
                <div class="event-details">{{ event.committee_name }} - {{ event.hativa_name }}</div>
            </div>
            {% endfor %}
            
            {% set hour_committees = day.committees_by_hour.get(hour, []) %}
            {% for committee in hour_committees %}
            <div class="week-committee clickable-committee" 
                 data-committee="{{ committee.committee_name }}"
                 data-hativa="{{ committee.hativa_name }}"
                 data-date="{{ day.date }}"
                 data-vaadot-id="{{ committee.vaadot_id }}"
                 title="לחץ להוספת אירוע">
                <i class="bi bi-plus-circle me-1"></i>
                {{ committee.committee_name }}
            </div>
            {% endfor %}
        </div>
        {% endfor %}
        {% endfor %}
    </div>
</div>

<style>
.week-calendar {
    display: grid;
    grid-template-columns: 80px repeat(7, 1fr);
    gap: 1px;
    background-color: #dee2e6;
    border: 1px solid #dee2e6;
    overflow-x: auto;
}

.time-column-header {
    background-color: #495057;
    border-bottom: 1px solid #dee2e6;
}

.day-column-header {
    background-color: #495057;
    color: white;
    padding: 10px;
    text-align: center;
    font-weight: bold;
    border-bottom: 1px solid #dee2e6;
}

.day-column-header.today-header {
    background-color: #2196f3;
}

.day-name {
    font-size: 0.9rem;
}

.day-date {
    font-size: 1.1rem;
    margin-top: 2px;
}

.time-slot {
    background-color: #f8f9fa;
    padding: 10px 5px;
    text-align: center;
    font-size: 0.8rem;
    font-weight: bold;
    border-bottom: 1px solid #dee2e6;
    writing-mode: horizontal-tb;
}

.day-slot {
    background-color: white;
    min-height: 60px;
    padding: 4px;
    border-bottom: 1px solid #dee2e6;
    position: relative;
    cursor: pointer;
}

.day-slot:hover {
    background-color: #f8f9fa;
}

.day-slot.today-slot {
    background-color: #e3f2fd;
}

.week-event {
    background-color: #e7f3ff;
    border: 1px solid #2196f3;
    border-radius: 4px;
    padding: 4px;
    margin-bottom: 2px;
    font-size: 0.75rem;
    cursor: pointer;
    transition: all 0.2s;
}

.week-event:hover {
    background-color: #bbdefb;
    transform: scale(1.02);
}

.event-time {
    font-weight: bold;
    color: #1976d2;
}

.event-title {
    font-weight: bold;
    margin: 2px 0;
}

.event-details {
    color: #666;
    font-size: 0.7rem;
}

.week-committee {
    background-color: #fff3cd;
    border: 1px solid #ffc107;
    border-radius: 4px;
    padding: 4px;
    margin-bottom: 2px;
    font-size: 0.75rem;
    cursor: pointer;
    transition: all 0.2s;
}

.week-committee:hover {
    background-color: #ffc107;
    transform: scale(1.02);
}

@media (max-width: 768px) {
    .week-calendar {
        grid-template-columns: 60px repeat(7, minmax(100px, 1fr));
        font-size: 0.8rem;
    }
    
    .day-slot {
        min-height: 40px;
        padding: 2px;
    }
    
    .week-event, .week-committee {
        font-size: 0.65rem;
        padding: 2px;
    }
    
    .time-slot {
        padding: 5px 2px;
        font-size: 0.7rem;
    }
}
</style>
