# מדריך תפקידים והרשאות במערכת ניהול ועדות

## סקירה כללית

המערכת תומכת ב-**3 סוגי משתמשים** עם הרשאות שונות:

1. **👤 User (משתמש רגיל)** - צפייה והוספה בחטיבה שלו
2. **👨‍💼 Manager (מנהל חטיבה)** - ניהול מלא של החטיבה שלו
3. **👑 Admin (מנהל מערכת)** - גישה מלאה לכל המערכת

בנוסף, המערכת תומכת ב-**2 מקורות אימות**:
- 🖥️ **Active Directory** - משתמשים מאומתים דרך AD
- 💾 **מקומי** - משתמשים שמורים במסד הנתונים

---

## 🔐 דף התחברות

### מה כל משתמש רואה:

#### כאשר AD מופעל:
```
┌─────────────────────────────────────────┐
│  🔐 התחברות למערכת                     │
│  📋 מחובר ל-Active Directory           │
│     ad.company.local                    │
├─────────────────────────────────────────┤
│  ℹ️ אימות Active Directory פעיל       │
│     תוכל להתחבר עם פרטי ה-AD שלך      │
│     או עם משתמש מקומי                  │
│                                         │
│  שם משתמש: [AD או מקומי]              │
│  סיסמה: [____________________]         │
│                                         │
│  [🛡️ התחבר]                            │
│                                         │
│  ℹ️ משתמשים מקומיים:                  │
│     מנהל: admin / admin123             │
│  ───────────────────────────────────    │
│  🖥️ משתמשי AD: השתמש בפרטי AD שלך     │
└─────────────────────────────────────────┘
```

#### כאשר AD כבוי:
```
┌─────────────────────────────────────────┐
│  🔐 התחברות למערכת                     │
│  איזון עומסים - ניהול ועדות             │
├─────────────────────────────────────────┤
│  שם משתמש: [____________________]      │
│  סיסמה: [____________________]         │
│                                         │
│  [➡️ התחבר למערכת]                     │
│                                         │
│  ℹ️ משתמשי דמו:                        │
│     מנהל: admin / admin123             │
│     משתמש: user / user123              │
└─────────────────────────────────────────┘
```

**פעולות אפשריות:**
- ✅ הזנת שם משתמש וסיסמה
- ✅ התחברות (AD או מקומי)
- ✅ קבלת הודעות שגיאה מפורטות

---

## 👤 משתמש רגיל (User)

### דף הבית (Dashboard)

#### מה המשתמש רואה:
```
┌─────────────────────────────────────────┐
│  🏠 לוח בקרה                           │
├─────────────────────────────────────────┤
│  📊 סטטיסטיקות:                        │
│  • חטיבות: 5                           │
│  • מסלולים: 15                         │
│  • סוגי ועדות: 8                       │
│  • ועדות: 25                           │
│  • אירועים: 40                         │
│                                         │
│  📅 לוח שנה - רק צפייה                │
│  [ינואר 2025]                          │
│  • ועדות בחטיבה שלי                    │
│  • אירועים בחטיבה שלי                  │
│                                         │
│  🔒 מצב עריכה: לפי תקופת עריכה         │
└─────────────────────────────────────────┘
```

**פעולות אפשריות:**
- ✅ **צפייה** בלוח השנה
- ✅ **הוספת אירועים** לועדות בחטיבה שלו (בתקופת עריכה)
- ✅ **עריכת אירועים** שהוא יצר (בתקופת עריכה)
- ✅ **צפייה** בועדות ואירועים של כל החטיבות
- ❌ **לא יכול** ליצור ועדות
- ❌ **לא יכול** לערוך אירועים של אחרים
- ❌ **לא יכול** לערוך מחוץ לתקופת עריכה

### תפריט ניווט (User)

```
┌─────────────────────────────────────────┐
│  🏠 דף הבית                            │
│  📅 לוח שנה                            │
│  📋 טבלת אירועים                       │
│  📊 סטטיסטיקות                         │
├─────────────────────────────────────────┤
│  👤 [שם המשתמש] ▼                      │
│  ├─ פרופיל                             │
│  ├─ יציאה                              │
└─────────────────────────────────────────┘
```

### טבלת אירועים

**מה רואה:**
```
┌──────────────────────────────────────────────────────┐
│  🔍 סינון: [חטיבה] [מסלול] [תאריך] [סטטוס]        │
├──────────────────────────────────────────────────────┤
│  שם אירוע | ועדה | מסלול | תאריך | בקשות | פעולות  │
├──────────────────────────────────────────────────────┤
│  אירוע א  | ועדה 1| מסלול א| 15/10 | 50    | [👁️]  │
│  אירוע ב  | ועדה 2| מסלול ב| 20/10 | 30    | [✏️] │
│  אירוע ג  | ועדה 3| מסלול ג| 25/10 | 40    | [👁️]  │
└──────────────────────────────────────────────────────┘
```

**פעולות:**
- ✅ **צפייה** (👁️) - כל האירועים
- ✅ **עריכה** (✏️) - רק אירועים שלו, בתקופת עריכה, בחטיבה שלו
- ✅ **סינון** לפי חטיבה, מסלול, תאריך
- ✅ **חיפוש** אירועים
- ✅ **ייצוא** נתונים

---

## 👨‍💼 מנהל חטיבה (Manager)

### דף הבית (Dashboard)

#### מה המנהל רואה:
```
┌─────────────────────────────────────────┐
│  🏠 לוח בקרה - מנהל חטיבה              │
├─────────────────────────────────────────┤
│  📊 סטטיסטיקות החטיבה שלי:             │
│  • מסלולים: 5                          │
│  • ועדות: 12                           │
│  • אירועים: 25                         │
│  • בקשות צפויות: 500                   │
│                                         │
│  📅 לוח שנה - עריכה מלאה               │
│  [ינואר 2025]                          │
│  [+ הוסף ועדה]  [+ הוסף אירוע]        │
│                                         │
│  🔓 מצב עריכה: פעיל תמיד               │
└─────────────────────────────────────────┘
```

**פעולות אפשריות:**
- ✅ **יצירת ועדות** בחטיבה שלו
- ✅ **עריכת ועדות** בחטיבה שלו
- ✅ **מחיקת ועדות** בחטיבה שלו
- ✅ **יצירת אירועים** בחטיבה שלו
- ✅ **עריכת כל האירועים** בחטיבה שלו
- ✅ **ניהול מסלולים** בחטיבה שלו
- ✅ **צפייה** בכל החטיבות
- ✅ **עריכה גם מחוץ לתקופת עריכה**
- ❌ **לא יכול** לערוך חטיבות אחרות
- ❌ **לא יכול** לנהל משתמשים

### תפריט ניווט (Manager)

```
┌─────────────────────────────────────────┐
│  🏠 דף הבית                            │
│  📅 לוח שנה                            │
│  📋 טבלת אירועים                       │
│  🔄 תזמון אוטומטי                      │
│  📊 סוגי ועדות                         │
│  🎯 מסלולים                            │
│  🗓️ תאריכי חריג                       │
│  ⚙️ אילוצים                            │
├─────────────────────────────────────────┤
│  👨‍💼 [שם המנהל] ▼                      │
│  ├─ פרופיל                             │
│  ├─ סטטיסטיקות החטיבה                 │
│  ├─ יציאה                              │
└─────────────────────────────────────────┘
```

### ניהול מסלולים

```
┌──────────────────────────────────────────────┐
│  🎯 מסלולים - חטיבה שלי                   │
│  [+ הוסף מסלול חדש]                       │
├──────────────────────────────────────────────┤
│  שם | SLA | שלבים | אירועים | פעולות      │
├──────────────────────────────────────────────┤
│  מסלול א | 45 | 10+15+10+10 | 8 | [✏️][🗑️] │
│  מסלול ב | 60 | 15+20+15+10 | 5 | [✏️][🗑️] │
└──────────────────────────────────────────────┘
```

**פעולות:**
- ✅ **הוספה** - מסלולים חדשים בחטיבה שלו
- ✅ **עריכה** - הגדרות SLA, שלבים
- ✅ **מחיקה** - אם אין אירועים קשורים
- ✅ **השבתה** - במקום מחיקה

### תזמון אוטומטי

```
┌──────────────────────────────────────────────┐
│  🔄 תזמון אוטומטי של ועדות                │
├──────────────────────────────────────────────┤
│  📅 בחר תקופה:                             │
│  שנה: [2025] חודש: [ינואר]                │
│  חטיבה: [החטיבה שלי] ✅                   │
│                                            │
│  [🚀 צור תזמון אוטומטי]                   │
│                                            │
│  📋 תוצאות:                                │
│  • 12 ועדות הוצעו                         │
│  • מתאריכים מוצעים                        │
│  • בלי התנגשויות                          │
│                                            │
│  [✅ אשר הכל] [✏️ ערוך בחירה]            │
└──────────────────────────────────────────────┘
```

**פעולות:**
- ✅ **יצירת תזמון אוטומטי** לחטיבה שלו
- ✅ **סקירה והרשאה** של הצעות
- ✅ **עריכה** לפני אישור
- ✅ **אישור בחלקי** או מלא

---

## 👑 מנהל מערכת (Admin)

### דף הבית (Dashboard)

#### מה האדמין רואה:
```
┌─────────────────────────────────────────┐
│  🏠 לוח בקרה - מנהל מערכת               │
├─────────────────────────────────────────┤
│  📊 סטטיסטיקות מערכת:                  │
│  • חטיבות: 5 [+]                       │
│  • מסלולים: 20                         │
│  • סוגי ועדות: 15                      │
│  • ועדות: 50                           │
│  • אירועים: 120                        │
│  • משתמשים: 25 (15 AD + 10 מקומיים)   │
│                                         │
│  📅 לוח שנה - שליטה מלאה               │
│  [כל החטיבות]                          │
│  [+ ועדה] [+ אירוע] [⚙️ הגדרות]       │
│                                         │
│  🔓 מצב עריכה: תמיד פעיל               │
│  🎛️ ניהול תקופת עריכה: [ON/OFF]       │
└─────────────────────────────────────────┘
```

**סמכויות מיוחדות:**
- ✅ **ניהול כל החטיבות**
- ✅ **ניהול משתמשים**
- ✅ **הגדרות Active Directory**
- ✅ **יומן ביקורת**
- ✅ **אילוצים וחוקים**
- ✅ **שליטה על תקופת עריכה**
- ✅ **עריכה תמיד** (ללא הגבלות)

### תפריט ניווט (Admin)

```
┌─────────────────────────────────────────┐
│  🏠 דף הבית                            │
│  📅 לוח שנה                            │
│  📋 טבלת אירועים                       │
│  🔄 תזמון אוטומטי                      │
│  📊 סוגי ועדות                         │
│  🎯 מסלולים                            │
│  🏢 חטיבות                             │
│  🗓️ תאריכי חריג                       │
│  ⚙️ אילוצים                            │
├─────────────────────────────────────────┤
│  👑 [שם האדמין] ▼                      │
│  ├─ 👥 ניהול משתמשים                   │
│  ├─ 🖥️ הגדרות Active Directory        │
│  ├─ 📜 יומן ביקורת                    │
│  ├─ 🎛️ ניהול תקופת עריכה             │
│  ├─ פרופיל                             │
│  ├─ יציאה                              │
└─────────────────────────────────────────┘
```

### ניהול משתמשים

```
┌──────────────────────────────────────────────────┐
│  👥 ניהול משתמשים                              │
│  [🔍 חיפוש] [סינון] [+ הוסף משתמש]            │
├──────────────────────────────────────────────────┤
│  📊 סטטיסטיקות:                                │
│  סה"כ: 25 | פעילים: 23 | אדמינים: 3           │
│  AD: 15 | מקומיים: 10                          │
├──────────────────────────────────────────────────┤
│  [כרטיס משתמש 1]                               │
│  ┌──────────────────────────────────────────┐   │
│  │ 👤 יוסי כהן                             │   │
│  │ yossi.cohen                              │   │
│  │ yossi@company.com                        │   │
│  │ 👑 מנהל מערכת  🖥️ Active Directory     │   │
│  │ חטיבה: חטיבה א                          │   │
│  │ סטטוס: ✅ פעיל                          │   │
│  │ התחברות אחרונה: 15/10/2025 10:30       │   │
│  │                                          │   │
│  │ [✏️ ערוך] [❌ השבת] [🗑️ מחק]           │   │
│  └──────────────────────────────────────────┘   │
│                                                  │
│  [כרטיס משתמש 2]                               │
│  ┌──────────────────────────────────────────┐   │
│  │ 👤 שרה לוי                              │   │
│  │ sara.levi                                │   │
│  │ sara@company.com                         │   │
│  │ 👨‍💼 מנהל חטיבה  💾 מקומי               │   │
│  │ חטיבה: חטיבה ב                          │   │
│  │ סטטוס: ✅ פעיל                          │   │
│  │                                          │   │
│  │ [✏️ ערוך] [🔑 שנה סיסמה] [❌ השבת]     │   │
│  └──────────────────────────────────────────┘   │
└──────────────────────────────────────────────────┘
```

**פעולות על משתמשים:**
- ✅ **הוספה** - יצירת משתמשים מקומיים חדשים
- ✅ **עריכה** - שינוי תפקיד, חטיבה, פרטים
- ✅ **שינוי סיסמה** - רק למשתמשים מקומיים
- ✅ **השבתה/הפעלה** - חסימת גישה זמנית
- ✅ **מחיקה** - הסרת משתמש לצמיתות
- ✅ **סנכרון AD** - יבוא משתמשים מ-AD

### הגדרות Active Directory

```
┌──────────────────────────────────────────────────┐
│  🖥️ הגדרות Active Directory                   │
├──────────────────────────────────────────────────┤
│  סטטוס: ✅ פעיל                                │
│  משתמשי AD: 15 | משתמשים מקומיים: 10           │
├──────────────────────────────────────────────────┤
│  🔌 הגדרות חיבור:                              │
│  ☑️ הפעל AD                                     │
│  שרת: ad.company.local                          │
│  פורט: 636                                      │
│  ☑️ SSL/LDAPS                                   │
│  [🔌 בדוק חיבור]                               │
│                                                  │
│  📁 הגדרות ספרייה:                             │
│  Base DN: DC=company,DC=local                   │
│  Bind DN: CN=service...                         │
│  User Search Base: OU=Users...                  │
│                                                  │
│  👥 מיפוי תפקידים:                             │
│  Admin Group: Domain Admins                     │
│  Manager Group: Division Managers               │
│                                                  │
│  🔄 סנכרון:                                    │
│  ☑️ צור משתמשים אוטומטית                       │
│  ☑️ סנכרן בכל התחברות                         │
│  חטיבת ברירת מחדל: [בחר]                      │
│                                                  │
│  [💾 שמור הגדרות]                              │
└──────────────────────────────────────────────────┘
```

**פעולות AD:**
- ✅ **הפעלה/כיבוי** AD
- ✅ **הגדרת חיבור** - שרת, פורט, SSL
- ✅ **בדיקת חיבור** - בדיקה מיידית
- ✅ **מיפוי קבוצות** - תפקידים לפי AD groups
- ✅ **הגדרות סנכרון** - אוטומטי/ידני
- ✅ **חיפוש משתמשים** - ישירות מ-AD
- ✅ **סנכרון ידני** - יבוא משתמש ספציפי

### יומן ביקורת

```
┌──────────────────────────────────────────────────┐
│  📜 יומן ביקורת                                │
│  [🔍 חיפוש] [סינון] [📅 תאריכים] [💾 ייצוא]   │
├──────────────────────────────────────────────────┤
│  זמן | משתמש | פעולה | ישות | פרטים | סטטוס  │
├──────────────────────────────────────────────────┤
│  10:30 | admin | יצירה | ועדה | ועדה א | ✅    │
│  10:25 | yossi | עדכון | אירוע | אירוע ב| ✅   │
│  10:20 | sara  | מחיקה | מסלול | מסלול ג| ✅   │
│  10:15 | david | התחברות| מערכת| AD auth| ✅   │
│  10:10 | admin | עדכון | הגדרות| AD cfg | ✅   │
│  10:05 | yossi | יצירה | אירוע | אירוע ד| ❌   │
└──────────────────────────────────────────────────┘
```

**פעולות ביקורת:**
- ✅ **צפייה** בכל הפעולות
- ✅ **סינון** לפי משתמש, פעולה, תאריך
- ✅ **חיפוש** מתקדם
- ✅ **ייצוא** ל-CSV
- ✅ **סטטיסטיקות** שימוש

### ניהול אילוצים

```
┌──────────────────────────────────────────────────┐
│  ⚙️ אילוצים וחוקים                            │
├──────────────────────────────────────────────────┤
│  📅 ימי עבודה:                                 │
│  ☑️ ראשון ☑️ שני ☑️ שלישי ☑️ רביעי          │
│  ☑️ חמישי ☑️ שישי ☐ שבת                      │
│                                                  │
│  ⏰ שעות עבודה:                                │
│  התחלה: 08:00 | סיום: 17:00                   │
│                                                  │
│  📊 מגבלות ועדות:                              │
│  מקסימום ביום: [1]                             │
│  מקסימום בשבוע: [3]                            │
│  מקסימום בשבוע 3: [4]                          │
│                                                  │
│  📈 מגבלות בקשות:                              │
│  מקסימום בקשות ביום: [100]                     │
│                                                  │
│  🎯 המלצות ועדות:                              │
│  ציון בסיס: [100]                              │
│  בונוס למיטבי: [25]                           │
│  פנלטי לעומס: [15]                             │
│                                                  │
│  [💾 שמור הגדרות]                              │
└──────────────────────────────────────────────────┘
```

**פעולות אילוצים:**
- ✅ **הגדרת ימי עבודה**
- ✅ **הגדרת שעות עבודה**
- ✅ **מגבלות ועדות ביום/שבוע**
- ✅ **מגבלות בקשות**
- ✅ **כיול מערכת המלצות**

### ניהול חטיבות

```
┌──────────────────────────────────────────────────┐
│  🏢 ניהול חטיבות                               │
│  [+ הוסף חטיבה חדשה]                           │
├──────────────────────────────────────────────────┤
│  שם | תיאור | צבע | מסלולים | סטטוס | פעולות │
├──────────────────────────────────────────────────┤
│  חטיבה א | תיאור... | 🔵 | 5 | ✅ | [✏️][🗑️]  │
│  חטיבה ב | תיאור... | 🔴 | 3 | ✅ | [✏️][🗑️]  │
│  חטיבה ג | תיאור... | 🟢 | 7 | ❌ | [✏️][▶️]  │
└──────────────────────────────────────────────────┘
```

**פעולות על חטיבות:**
- ✅ **יצירה** - חטיבות חדשות
- ✅ **עריכה** - שם, תיאור, צבע
- ✅ **השבתה** - הסתרה זמנית
- ✅ **הפעלה** - החזרה לפעילות
- ✅ **מחיקה** - רק אם אין תלות

---

## 📊 תכונות משותפות לכולם

### לוח שנה

**כל המשתמשים רואים:**
```
┌──────────────────────────────────────────────────┐
│  📅 ינואר 2025                [<] [היום] [>]   │
├──────────────────────────────────────────────────┤
│  א  ב  ג  ד  ה  ו  ש                          │
│           1  2  3  4  5                        │
│  6  7  8  9  10 11 12                         │
│  13 14 [15]16 17 18 19    ← יום נוכחי        │
│  20 21 22 23 24 25 26                         │
│  27 28 29 30 31                               │
│                                                  │
│  📌 ועדות ביום 15/1:                           │
│  • 🔵 ועדה א - חטיבה א (3 אירועים)           │
│  • 🔴 ועדה ב - חטיבה ב (5 אירועים)           │
└──────────────────────────────────────────────────┘
```

**אינטראקציה:**
- ✅ **ניווט** בין חודשים
- ✅ **קפיצה** ליום הנוכחי
- ✅ **לחיצה** על תאריך - פרטי יום
- ✅ **גרירה** (Drag & Drop) - לפי הרשאות
- ✅ **צבעים** לפי חטיבות

### חיפוש וסינון

**כלים זמינים:**
```
┌──────────────────────────────────────────────────┐
│  🔍 [חיפוש...                           ] [🔎] │
│  📁 סינונים:                                    │
│  חטיבה: [הכל ▼]                                │
│  מסלול: [הכל ▼]                                │
│  תאריך: [מ-תאריך] עד [עד-תאריך]               │
│  סטטוס: [הכל ▼]                                │
│  [🔄 אפס] [🔍 חפש]                             │
└──────────────────────────────────────────────────┘
```

---

## 🔒 מטריצת הרשאות

| פעולה | User | Manager | Admin |
|-------|------|---------|-------|
| **צפייה בלוח שנה** | ✅ הכל | ✅ הכל | ✅ הכל |
| **צפייה באירועים** | ✅ הכל | ✅ הכל | ✅ הכל |
| **יצירת אירוע** | ✅ בחטיבה שלו* | ✅ בחטיבה שלו | ✅ בכל מקום |
| **עריכת אירוע** | ✅ שלו בלבד* | ✅ בחטיבה שלו | ✅ כל אירוע |
| **מחיקת אירוע** | ❌ גם bulk | ✅ בחטיבה שלו + bulk | ✅ כל אירוע + bulk |
| **יצירת ועדה** | ❌ | ✅ בחטיבה שלו | ✅ בכל מקום |
| **עריכת ועדה** | ❌ | ✅ בחטיבה שלו | ✅ כל ועדה |
| **מחיקת ועדה** | ❌ גם bulk | ✅ בחטיבה שלו + bulk | ✅ כל ועדה + bulk |
| **ניהול מסלולים** | ❌ | ✅ בחטיבה שלו | ✅ כל מסלול |
| **ניהול חטיבות** | ❌ | ❌ | ✅ |
| **ניהול משתמשים** | ❌ | ❌ | ✅ |
| **הגדרות AD** | ❌ | ❌ | ✅ |
| **יומן ביקורת** | ❌ | ❌ | ✅ |
| **ניהול אילוצים** | ❌ | ❌ | ✅ |
| **תזמון אוטומטי** | ❌ | ✅ לחטיבה שלו | ✅ לכל חטיבה |
| **ניהול תקופת עריכה** | ❌ | ❌ | ✅ |

\* תלוי בתקופת עריכה

---

## ⏰ תקופת עריכה

### כאשר תקופת עריכה **פעילה** (ON):

| תפקיד | מה קורה |
|-------|---------|
| **User** | ✅ יכול ליצור ולערוך אירועים בחטיבה שלו |
| **Manager** | ✅ יכול ליצור ולערוך הכל בחטיבה שלו (ללא שינוי) |
| **Admin** | ✅ יכול הכל (ללא שינוי) |

### כאשר תקופת עריכה **סגורה** (OFF):

| תפקיד | מה קורה |
|-------|---------|
| **User** | ❌ צפייה בלבד, לא יכול לערוך |
| **Manager** | ✅ יכול ליצור ולערוך הכל בחטיבה שלו (ללא שינוי) |
| **Admin** | ✅ יכול הכל (ללא שינוי) |

**Admin יכול לשנות** את תקופת העריכה בכל עת:
```
תפריט משתמש → ניהול תקופת עריכה → [ON/OFF]
```

---

## 🎨 אינדיקטורים ויזואליים

### סטטוס תקופת עריכה:
```
🟢 תקופת עריכה פעילה - ניתן לערוך
🔴 תקופת עריכה סגורה - צפייה בלבד (למעט מנהלים)
```

### סוג משתמש:
```
👑 Admin - מנהל מערכת
👨‍💼 Manager - מנהל חטיבה
👤 User - משתמש רגיל
```

### מקור אימות:
```
🖥️ Active Directory - משתמש AD
💾 מקומי - משתמש מקומי
```

### סטטוס ועדה/אירוע:
```
✅ פעיל
❌ מושבת
⏳ בהמתנה
✔️ הושלם
```

---

## 📱 תמיכה במובייל

המערכת מגלה מכשירים ניידים ויכולה לחסום או להציג ממשק מותאם.

**כרגע**: המערכת מציגה הודעה שהמערכת מיועדת למחשב שולחני.

---

## 🆘 עזרה ותמיכה

### קבלת עזרה:

**משתמש רגיל:**
- פנה למנהל החטיבה שלך
- בדוק את מדריך המשתמש

**מנהל חטיבה:**
- פנה למנהל המערכת
- בדוק את מדריך המנהלים

**מנהל מערכת:**
- ראה `ACTIVE_DIRECTORY_SETUP.md`
- ראה `AD_INTEGRATION_SUMMARY.md`
- בדוק יומן ביקורת לאיתור בעיות

---

**גרסה**: 2.0  
**עדכון אחרון**: אוקטובר 2025  
**תמיכה**: מערכת ניהול ועדות - איזון עומסים

